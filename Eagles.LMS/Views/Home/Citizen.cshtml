@model CitizenRequist
@{
    ViewBag.Title = "Citizen";
    Layout = "~/Views/Shared/_Layout.cshtml";

    UnitOfWork ctx = new UnitOfWork();
    var SEO = ctx.SEOManager.GetAll().FirstOrDefault();


    var _Citizens = ctx.CitizensManager.GetAll().OrderByDescending(s => s.Id).ToList();
    var _contactUs = ctx.ContactUsManager.GetAll().FirstOrDefault();
    bool en = true;
    if (Request.Cookies["Language"] != null)
    {
        en = (Request.Cookies["Language"].Value.ToString() == "en") ? true : false;

    }
    if (en == true)
    {
        _Citizens = _Citizens.Where(s => s.TitleEnglish != null).ToList();
    }
    else
    {
        _Citizens = _Citizens.Where(s => s.TitleArabic != null).ToList();

    }
}
@section PageTitle{
    <title>@SEO.CitizenPageTitle</title>
}
@section metatags{
    <meta name="keywords" content="@SEO.CitizenPageMetaKeywords " />
    <meta name="description" id="metaDesc" content="@SEO.CitizenPageMetaDescription" />
    <link rel="canonical" id="canonicalUrl" href="@SEO.CitizenPageCanonicalUrl" />
}
@section EndHeader{
    <style>
        .threecitizenimgadetails .bigimg {
            width: 100%;
            margin: auto;
            padding: 0;
        }

        .menu li a.active-a5 {
            color: #af7a2c;
            border-bottom: 1px solid #fff0;
            font-weight: 500;
        }
    </style>



}



<div class="header-bc">
    <div class="ClassImaesBG">
        <img src="~/assets_NewPublic/images/bg/NEWBG/NewNewsGBIN.jpg" />
    </div>
    <div class="PageTitleCOnt">
        <div class="container">
            <div class="row">

                <div class="col-md-8">

                    <div class="title-header">

                        <h3>@Resources.Global.Citizen</h3>

                        <div class="breadcrumbs">
                            <ul>
                                <li><a href="#">@Resources.Global.Home</a> > </li>
                                <li>@Resources.Global.Citizen</li>
                            </ul>
                        </div>
                        <!--end breadcrumb-->

                    </div>
                    <!--end title-header-->

                </div>
                <!--end col-6-->



            </div>
            <!--end row-->
        </div>
        <!--end container-->
    </div>
</div>
<!--end header-bc-->

<div class="threecitizenimgadetails newsssspagess">
    <div class="overlay">
        <div class="container">
            <div class="ciciccont">
                <div class="row otherrooow">

                    @foreach (var _citizen in _Citizens)
                    {
                        <div class="NewsCoool">
                            <div class="bigimg images">
                                @*<img src="@_citizen.Image">*@
                                <div class="CitezinImgItem">
                                    <div class=" imagsBG" style="background-image: url(@_citizen.Image)"></div>
                                </div>
                                <div class="discription">
                                    @if (en)
                                    {
                                        <h2>@_citizen.TitleEnglish </h2>
                                        <div class="ContentPargraph">
                                            <p>@Html.Raw(@_citizen.DescriptionEnglish)</p>
                                        </div>
                                    }
                                    else
                                    {
                                        <h2>@_citizen.TitleArabic </h2>
                                        <div class="ContentPargraph">
                                            <p>@Html.Raw(@_citizen.DescriptionArabic)</p>
                                        </div>
                                    }

                                </div>
                            </div>
                        </div>
                    }

                    @*<div class="col-lg-4 col-lg-4 col-md-4 col-xs-12">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="SmallImg images">
                                        <img src="~/assets_NewPublic/images/f18c.jpeg">
                                        <div class="discription">
                                            <h2>Citizen Discription Name</h2>
                                            <p>EMPC Media Services Center is a local TV news organization. With a great team of journalist, producers, reporters</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="SmallImg images">
                                        <img src="~/assets_NewPublic/images/f21c.jpeg">
                                        <div class="discription">
                                            <h2>Citizen Discription Name</h2>
                                            <p>EMPC Media Services Center is a local TV news organization. With a great team of journalist, producers, reporters</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>*@
                </div>
            </div>
        </div>
    </div>
</div>


<div class="news">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="address">

                    <h3><i class="fa fa-envelope" aria-hidden="true"></i></h3>
                    <h4>@Resources.Global.ContactUs</h4>
                    <p>@_contactUs.CitizenEmail</p>

                </div>
                <!--end adress-->
            </div>
            <!--end col-4-->
            <div class="col-lg-12">
                <div class="CitizenFormSend">
                    <div class="container sendmessage">
                        @using (Html.BeginForm("Citizen", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                        {

                            <form action="#" method="post">
                                <div class="row">

                                    <div class="col-md-12">
                                        <div class="TitleForm">
                                            <h3>@Resources.Global.SendNews</h3>
                                        </div>

                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>@Resources.Global.FirstName</label>
                                            @Html.TextBoxFor(s => s.FirstName, null, new
                                           {
                                               @class = "",
                                               placeholder = "First Name",
                                               @required = "rquired"
                                           })


                                            @*<input type="text" placeholder='@Resources.Global.FirstName' />*@
                                        </div>
                                    </div>
                                    <!--end col-6-->

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>@Resources.Global.LastName</label>
                                            @Html.TextBoxFor(s => s.LastName, null, new
                                           {
                                               @class = "",
                                               placeholder = "Last Name",
                                               @required = "rquired"
                                           })
                                            @*<input type="text" placeholder='@Resources.Global.LastName' />*@
                                        </div>
                                    </div>
                                    <!--end col-6-->

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>@Resources.Global.EmailAddess</label>
                                            @Html.TextBoxFor(s => s.Email, null, new
                                           {
                                               @class = "",
                                               placeholder = "Email",
                                               type = "email",
                                               @required = "rquired"
                                           })
                                            @*<input type="text" placeholder='@Resources.Global.EmailAddess' />*@
                                        </div>
                                    </div>
                                    <!--end col-6-->

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>@Resources.Global.phoneNumber</label>
                                            @Html.TextBoxFor(s => s.Phone, null, new
                                           {
                                               @class = "",
                                               placeholder = "Phone",
                                               @required = "rquired"
                                           })
                                            @*<input type="text" placeholder='@Resources.Global.phoneNumber' />*@
                                        </div>


                                    </div>
                                    <!--end col-6-->


                                    <div class="col-xs-12 col-md-12">
                                        <div class="form-group">
                                            <label>@Resources.Global.UploadImagesOrVideo </label>
                                            <div class="input-group image-preview">
                                                <input type="text" class=" image-preview-filename" disabled="disabled"> <!-- don't give a name === doesn't send on POST/GET -->
                                                <div class="input-group-btn">
                                                    <div class="btn btn-default image-preview-input">
                                                        <span class="glyphicon glyphicon-folder-open"></span>
                                                        <span class="image-preview-input-title">@Resources.Global.Browse</span>
                                                        <input type="file" name="uploadattachments" /> <!-- rename it -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>@Resources.Global.YourMessage</label>
                                            @Html.TextAreaFor(s => s.Message, new
                                           {
                                               @class = "",
                                               @required = "rquired",
                                               placeholder = "Your Message"
                                           })
                                            @*<textarea placeholder=' @Resources.Global.message ...'></textarea>*@
                                        </div>






                                    </div>
                                    <div class="col-lg-12 col-md-12">
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-black">@Resources.Global.SendNews</button>
                                        </div>
                                    </div>
                                    <!--end col-12-->


                                </div>
                                <!--end row-->

                            </form>

                        }

                    </div>
                    <!--end container-->
                </div>


            </div>









        </div>
        <!--end row-->
    </div>
    <!--end container-->
</div>



@section EndBody{

    <script>
        $(document).on('click', '#close-preview', function () {
            $('.image-preview').popover('hide');
            // Hover befor close the preview
            $('.image-preview').hover(
                function () {
                    $('.image-preview').popover('show');
                },
                function () {
                    $('.image-preview').popover('hide');
                }
            );
        });

        $(function () {
            // Create the close button
            var closebtn = $('<button/>', {
                type: "button",
                text: 'x',
                id: 'close-preview',
                style: 'font-size: initial;',
            });
            closebtn.attr("class", "close pull-right");
            // Set the popover default content
            //$('.image-preview').popover({
            //    trigger: 'manual',
            //    html: true,
            //    title: "<strong>Preview</strong>" + $(closebtn)[0].outerHTML,
            //    content: "There's no image",
            //    placement: 'bottom'
            //});
            // Clear event
            $('.image-preview-clear').click(function () {
                $('.image-preview').attr("data-content", "").popover('hide');
                $('.image-preview-filename').val("");
                $('.image-preview-clear').hide();
                $('.image-preview-input input:file').val("");
                $(".image-preview-input-title").text("Browse");
            });
            // Create the preview image
            $(".image-preview-input input:file").change(function () {
                var img = $('<img/>', {
                    id: 'dynamic',
                    width: 250,
                    height: 200
                });
                var file = this.files[0];
                var reader = new FileReader();
                // Set preview image into the popover data-content
                reader.onload = function (e) {
                    $(".image-preview-input-title").text("Change");
                    $(".image-preview-clear").show();
                    $(".image-preview-filename").val(file.name);
                    img.attr('src', e.target.result);
                    $(".image-preview").attr("data-content", $(img)[0].outerHTML).popover("show");
                }
                reader.readAsDataURL(file);
            });
        });
    </script>
}
