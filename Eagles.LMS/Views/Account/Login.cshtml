
@{ ViewBag.Title = "Login";
    Layout = null;
    var redirectUrl = ViewBag.RedirectUrl;
}

<!DOCTYPE html>
<html lang="en">
<!-- begin::Head -->
<head>
    <meta charset="utf-8" />
    <title> Login</title>
    <link rel="icon" href="~/assets_NewDash/images/NewImg/logoIcon.png">
    <meta name="description" content="Login page example">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700&display=swap" rel="stylesheet">
    <!--begin::Page Custom Styles(used by this page) -->
    <!--end::Page Custom Styles -->
    <!--begin::Global Theme Styles(used by all pages) -->
    <link href="~/assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css" />
    @*<link href="~/assets/demo/demo8/base/style.bundle.css" rel="stylesheet" type="text/css" />*@
    <!--        <link href="~/assets/snippets/custom/login/bootstrap.min.css" rel="stylesheet" />-->
    <!--        <link href="~/assets/snippets/custom/login/login-v2.demo8.css" rel="stylesheet" />-->
    <!-- Bootstrap Css -->
    <link href="~/assets_NewDash/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="~/assets_NewDash/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="~/assets_NewDash/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />

    <!--end::Global Theme Styles -->
    <!--begin::Layout Skins(used by all pages) -->
    <!--end::Layout Skins -->
    <style>


        [data-notify="progressbar"] {
            margin-bottom: 0px;
            position: absolute;
            bottom: 0px;
            left: 0px;
            width: 100%;
            height: 0px;
            background: rgba(244, 106, 106, .8);
        }

        .signlink {
        }

            .signlink p {
                text-align: center;
                font-size: 15px;
                font-family: 'Nunito';
                text-transform: capitalize;
            }

        .forgetPass {
            text-align: center;
            display: block;
            margin: 15px auto;
            font-size: 15px;
            color: #08f !important;
        }

        .btn.btn-light {
            background: #2a3042;
            color: #fff;
            font-size: 20px;
            border: 1px solid #2a3042;
            height: 40px;
            line-height: 40px;
            padding: 0;
            width: 40px;
        }
    </style>

</head>
<!-- end::Head -->
<!-- begin::Body -->
<body class="m-page--loading">

    <div class="account-pages my-5 pt-sm-5" style="">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 col-lg-6 col-xl-5">
                    <div class="card ">

                        <div class="card-body pt-0">
                            <div class="auth-logo">


                                <a href="/" class="auth-logo-dark">
                                    <div class="avatar-md profile-user-wid mb-4">
                                        <span class="avatar-title rounded-circle bg-light">
                                            <img src="~/assets_NewDash/images/NewImg/logoIcon.png" alt="" class="rounded-circle" height="55">
                                        </span>
                                    </div>
                                </a>
                            </div>
                            <div class="p-2">
                                <form id="form_userLogin" class="form-horizontal">

                                    <div class="mb-3">
                                        <label for="username" class="form-label">Username</label>

                                        <input class="form-control" name="loginName" type="text" placeholder="Email or Phone">
                                    </div>

                                    <div class="mb-3 password-field">
                                        <label class="form-label">Password</label>
                                        <div class="input-group auth-pass-inputgroup">

                                            <input class="form-control" name="loginPassword" type="password" placeholder="Enter password" aria-label="Password" aria-describedby="password-addon">
                                            <button class="btn btn-light " type="button" id="password-addon"><i class="mdi mdi-eye-outline"></i></button>
                                        </div>
                                    </div>


                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="remember-check">
                                        <label class="form-check-label" for="remember-check">
                                            Remember me
                                        </label>
                                    </div>

                                    <div class="mt-3 d-grid">
                                        <button id="test" class="btn btn-primary waves-effect waves-light">Log In</button>
                                    </div>



                                    @*<div class="mt-4 text-center">
                                            <a href="auth-recoverpw.html" class="text-muted"><i class="mdi mdi-lock me-1"></i> Forgot your password?</a>
                                        </div>*@
                                </form>
                            </div>

                        </div>
                    </div>
                    @*<div class="mt-5 text-center">

                            <div>
                                <p>Don't have an account ? <a href="auth-register.html" class="fw-medium text-primary"> Signup now </a> </p>
                                <p>
                                    ©
                                    <script>document.write(new Date().getFullYear())</script> Skote. Crafted with <i class="mdi mdi-heart text-danger"></i> by Themesbrand
                                </p>
                            </div>
                        </div>*@

                </div>
            </div>
        </div>
    </div>
    <!-- end account-pages -->
    <!-- begin::Global Config(global config for global JS sciprts) -->
    <script>
        var KTAppOptions = { "colors": { "state": { "brand": "#716aca", "light": "#ffffff", "dark": "#282a3c", "primary": "#5867dd", "success": "#34bfa3", "info": "#36a3f7", "warning": "#ffb822", "danger": "#fd3995" }, "base": { "label": ["#c5cbe3", "#a1a8c3", "#3d4465", "#3e4466"], "shape": ["#f0f3ff", "#d9dffa", "#afb4d4", "#646c9a"] } } };
    </script>
    <!-- end::Global Config -->
    <!-- JAVASCRIPT -->
    <script src="~/assets_NewDash/libs/jquery/jquery.min.js"></script>
    <script src="~/assets_NewDash/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets_NewDash/libs/metismenu/metisMenu.min.js"></script>
    <script src="~/assets_NewDash/libs/simplebar/simplebar.min.js"></script>
    <script src="~/assets_NewDash/libs/node-waves/waves.min.js"></script>

    <!-- App js -->
    <script src="~/assets_NewDash/js/app.js"></script>









    <!--begin::Global Theme Bundle(used by all pages) -->
    @*<script src="~/assets/snippets/custom/login/jquery.min.js"></script>
    <script src="~/assets/snippets/custom/login/main.js"></script>*@
    <script src="~/assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
    @*<script src="~/assets/demo/demo8/base/scripts.bundle.js" type="text/javascript"></script>*@
    <!--end::Global Theme Bundle -->
    <!--begin::Page Scripts(used by this page) -->

    <!--<script src="~/assets/app/custome/login/login-general.js"></script>-->
    <!--end::Page Scripts -->
    <!--begin::Global App Bundle(used by all pages) -->

    <!--<script src="~/assets/app/custome/login/app.bundle.js"></script>-->













    <script src="~/assets/app/custome/login/bootstrap-notify.min.js"></script>

    <script>
        $(window).on('load', function () {
            $('body').removeClass('m-page--loading');
        });

        var $loading = $('#loading').hide();
        //Attach the event handler to any element
        $(document)
            .ajaxStart(function () {

                $('body').addClass('m-page--loading');
                $loading.show();


                //ajax request went so show the loading image
            })
            .ajaxStop(function () {
                $('body').removeClass('m-page--loading');

                //got response so hide the loading image
                $loading.hide();
            });

        $(function () {

            function errorMessage(error) {
                $.notifyClose();
                $.notify({
                    title: "Error:",
                    message: error,

                }, {
                    allow_dismiss: true,
                    showProgressbar: true,
                    type: "danger",
                    mouse_over: null,
                    animate: {
                        enter: 'animated flipInY',
                        exit: 'animated flipOutX',

                    }
                });

            }
            let loginName = $("input[name=loginName]"), loginPassword = $('input[name=loginPassword]');
            $("#form_userLogin").submit((s) => {
                s.preventDefault();

                if (loginName.val() == '' || loginPassword.val() == '') {

                    errorMessage("The email address or phone number and password that you 've entered doesn't match any account.Sign up for an account.");

                    return false
                }
                $.ajax({
                    type: "POST",
                    url: "/Account/Login",
                    contentType: "application/json",
                    data: JSON.stringify({
                        LoginName: loginName.val(),
                        Password: loginPassword.val()
                    }),
                    success(resonse) {
                        if (resonse.Status == 200) {
                                var redirect = '@redirectUrl';
                            if (redirect != null && redirect != "") {
                                redirect = redirect.toLowerCase().replace("/admission", "Admission".toLowerCase());
                                window.open("/" + redirect, "_self");

                            } else {
                                window.open("/Admission/Home/Index", "_self");
                            }
                        } else {
                            errorMessage(resonse.Message);

                        }
                    }, error(error) {
                        errorMessage("The email address or phone number and password that you 've entered doesn't match any account.Sign up for an account.");


                    }
                })
            });
        })
    </script>
    <!--end::Global App Bundle -->
</body>
<!-- end::Body -->
</html>