
!function (e) { if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(); else if ("function" == typeof define && define.amd) define([], e); else { var t; (t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).LgZoom = e() } }(function () { var e; return (function () { function e(t, o, r) { function i(l, s) { if (!o[l]) { if (!t[l]) { var n = "function" == typeof require && require; if (!s && n) return n(l, !0); if (a) return a(l, !0); var c = Error("Cannot find module '" + l + "'"); throw c.code = "MODULE_NOT_FOUND", c } var g = o[l] = { exports: {} }; t[l][0].call(g.exports, function (e) { return i(t[l][1][e] || e) }, g, g.exports, e, t, o, r) } return o[l].exports } for (var a = "function" == typeof require && require, l = 0; l < r.length; l++)i(r[l]); return i } return e })()({ 1: [function (t, o, r) { var i, a; i = this, a = function () { "use strict"; var e, t, o = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var o = arguments[t]; for (var r in o) Object.prototype.hasOwnProperty.call(o, r) && (e[r] = o[r]) } return e }, r = { scale: 1, zoom: !0, actualSize: !0, enableZoomAfter: 300, useLeftForZoom: (e = !1, (t = navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)) && 54 > parseInt(t[2], 10) && (e = !0), e) }, i = function e(t) { return this.el = t, this.core = window.lgData[this.el.getAttribute("lg-uid")], this.core.s = o({}, r, this.core.s), this.core.s.zoom && this.core.doCss() && (this.init(), this.zoomabletimeout = !1, this.pageX = window.innerWidth / 2, this.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop)), this }; i.prototype.init = function () { var e = this, t = '<button type="button" aria-label="Zoom in" id="lg-zoom-in" class="lg-icon"></button><button type="button" aria-label="Zoom out" id="lg-zoom-out" class="lg-icon"></button>'; e.core.s.actualSize && (t += '<button type="button" aria-label="Actual size" id="lg-actual-size" class="lg-icon"></button>'), e.core.s.useLeftForZoom ? utils.addClass(e.core.outer, "lg-use-left-for-zoom") : utils.addClass(e.core.outer, "lg-use-transition-for-zoom"), this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend", t), utils.on(e.core.el, "onSlideItemLoad.lgtmzoom", function (t) { var o = e.core.s.enableZoomAfter + t.detail.delay; utils.hasClass(document.body, "lg-from-hash") && t.detail.delay ? o = 0 : utils.removeClass(document.body, "lg-from-hash"), e.zoomabletimeout = setTimeout(function () { utils.addClass(e.core.___slide[t.detail.index], "lg-zoomable") }, o + 30) }); var o = 1, r = function t(o) { var r, i, a = e.core.outer.querySelector(".lg-current .lg-image"), l = (window.innerWidth - a.clientWidth) / 2, s = (window.innerHeight - a.clientHeight) / 2 + (document.documentElement.scrollTop || document.body.scrollTop); r = e.pageX - l, i = e.pageY - s; var n = (o - 1) * r, c = (o - 1) * i; utils.setVendor(a, "Transform", "scale3d(" + o + ", " + o + ", 1)"), a.setAttribute("data-scale", o), e.core.s.useLeftForZoom ? (a.parentElement.style.left = -n + "px", a.parentElement.style.top = -c + "px") : utils.setVendor(a.parentElement, "Transform", "translate3d(-" + n + "px, -" + c + "px, 0)"), a.parentElement.setAttribute("data-x", n), a.parentElement.setAttribute("data-y", c) }, i = function t() { o > 1 ? utils.addClass(e.core.outer, "lg-zoomed") : e.resetZoom(), o < 1 && (o = 1), r(o) }, a = function t(r, a, l, s) { var n, c, g = a.clientWidth; n = e.core.s.dynamic ? e.core.s.dynamicEl[l].width || a.naturalWidth || g : e.core.items[l].getAttribute("data-width") || a.naturalWidth || g, utils.hasClass(e.core.outer, "lg-zoomed") ? o = 1 : n > g && (o = (c = n / g) || 2), s ? (e.pageX = window.innerWidth / 2, e.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop)) : (e.pageX = r.pageX || r.targetTouches[0].pageX, e.pageY = r.pageY || r.targetTouches[0].pageY), i(), setTimeout(function () { utils.removeClass(e.core.outer, "lg-grabbing"), utils.addClass(e.core.outer, "lg-grab") }, 10) }, l = !1; utils.on(e.core.el, "onAferAppendSlide.lgtmzoom", function (t) { var o = t.detail.index, r = e.core.___slide[o].querySelector(".lg-image"); e.core.isTouch || utils.on(r, "dblclick", function (e) { a(e, r, o) }), e.core.isTouch && utils.on(r, "touchstart", function (e) { l ? (clearTimeout(l), l = null, a(e, r, o)) : l = setTimeout(function () { l = null }, 300), e.preventDefault() }) }), utils.on(window, "resize.lgzoom scroll.lgzoom orientationchange.lgzoom", function () { e.pageX = window.innerWidth / 2, e.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop), r(o) }), utils.on(document.getElementById("lg-zoom-out"), "click.lg", function () { e.core.outer.querySelector(".lg-current .lg-image") && (o -= e.core.s.scale, i()) }), utils.on(document.getElementById("lg-zoom-in"), "click.lg", function () { e.core.outer.querySelector(".lg-current .lg-image") && (o += e.core.s.scale, i()) }), utils.on(document.getElementById("lg-actual-size"), "click.lg", function (t) { a(t, e.core.___slide[e.core.index].querySelector(".lg-image"), e.core.index, !0) }), utils.on(e.core.el, "onBeforeSlide.lgtm", function () { o = 1, e.resetZoom() }), e.core.isTouch || e.zoomDrag(), e.core.isTouch && e.zoomSwipe() }, i.prototype.getModifier = function (e, t, o) { var r = e; e = Math.abs(e); var i = this.getCurrentTransform(o); if (!i) return 1; var a = 1; if ("X" === t) { var l = Math.sign(parseFloat(i[0])); 0 === e || 180 === e ? a = 1 : 90 === e && (a = -90 === r && 1 === l || 90 === r && -1 === l ? -1 : 1), a *= l } else { var s = Math.sign(parseFloat(i[3])); if (0 === e || 180 === e) a = 1; else if (90 === e) { var n = parseFloat(i[1]), c = parseFloat(i[2]); a = Math.sign(n * c * r * s) } a *= s } return a }, i.prototype.getImageSize = function (e, t, o) { return 90 === t && (o = "x" === o ? "y" : "x"), e[({ y: "offsetHeight", x: "offsetWidth" })[o]] }, i.prototype.getDragCords = function (e, t) { return 90 === t ? { x: e.pageY, y: e.pageX } : { x: e.pageX, y: e.pageY } }, i.prototype.getSwipeCords = function (e, t) { var o = e.targetTouches[0].pageX, r = e.targetTouches[0].pageY; return 90 === t ? { x: r, y: o } : { x: o, y: r } }, i.prototype.getPossibleDragCords = function (e, t) { var o = (this.core.outer.querySelector(".lg").clientHeight - this.getImageSize(e, t, "y")) / 2, r = Math.abs(this.getImageSize(e, t, "y") * Math.abs(e.getAttribute("data-scale")) - this.core.outer.querySelector(".lg").clientHeight + o), i = (this.core.outer.querySelector(".lg").clientWidth - this.getImageSize(e, t, "x")) / 2, a = Math.abs(this.getImageSize(e, t, "x") * Math.abs(e.getAttribute("data-scale")) - this.core.outer.querySelector(".lg").clientWidth + i); return 90 === t ? { minY: i, maxY: a, minX: o, maxX: r } : { minY: o, maxY: r, minX: i, maxX: a } }, i.prototype.getDragAllowedAxises = function (e, t) { var o = this.getImageSize(e, t, "y") * e.getAttribute("data-scale") > this.core.outer.querySelector(".lg").clientHeight, r = this.getImageSize(e, t, "x") * e.getAttribute("data-scale") > this.core.outer.querySelector(".lg").clientWidth; return 90 === t ? { allowX: o, allowY: r } : { allowX: r, allowY: o } }, i.prototype.getCurrentTransform = function (e) { if (!e) return 0; var t = window.getComputedStyle(e, null), o = t.getPropertyValue("-webkit-transform") || t.getPropertyValue("-moz-transform") || t.getPropertyValue("-ms-transform") || t.getPropertyValue("-o-transform") || t.getPropertyValue("transform") || "none"; return "none" !== o ? o.split("(")[1].split(")")[0].split(",") : 0 }, i.prototype.getCurrentRotation = function (e) { if (!e) return 0; var t = this.getCurrentTransform(e); return t ? Math.round(Math.atan2(t[1], t[0]) * (180 / Math.PI)) : 0 }, i.prototype.resetZoom = function () { utils.removeClass(this.core.outer, "lg-zoomed"); for (var e = 0; e < this.core.___slide.length; e++)this.core.___slide[e].querySelector(".lg-img-wrap") && (this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("style"), this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-x"), this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-y")); for (var t = 0; t < this.core.___slide.length; t++)this.core.___slide[t].querySelector(".lg-image") && (this.core.___slide[t].querySelector(".lg-image").removeAttribute("style"), this.core.___slide[t].querySelector(".lg-image").removeAttribute("data-scale")); this.pageX = window.innerWidth / 2, this.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop) }, i.prototype.zoomSwipe = function () { for (var e, t = this, o = {}, r = {}, i = !1, a = !1, l = !1, s = 0, n = 0; n < t.core.___slide.length; n++)utils.on(t.core.___slide[n], "touchstart.lg", function (r) { if (utils.hasClass(t.core.outer, "lg-zoomed")) { var i = t.core.___slide[t.core.index].querySelector(".lg-object"); e = t.core.___slide[t.core.index].querySelector(".lg-img-rotate"), s = t.getCurrentRotation(e); var n = t.getDragAllowedAxises(i, Math.abs(s)); l = n.allowY, ((a = n.allowX) || l) && (r.preventDefault(), o = t.getSwipeCords(r, Math.abs(s))) } }); for (var c = 0; c < t.core.___slide.length; c++)utils.on(t.core.___slide[c], "touchmove.lg", function (n) { if (utils.hasClass(t.core.outer, "lg-zoomed")) { var c, g, u = t.core.___slide[t.core.index].querySelector(".lg-img-wrap"); n.preventDefault(), i = !0, r = t.getSwipeCords(n, Math.abs(s)), utils.addClass(t.core.outer, "lg-zoom-dragging"), g = l ? -Math.abs(u.getAttribute("data-y")) + (r.y - o.y) * t.getModifier(s, "Y", e) : -Math.abs(u.getAttribute("data-y")), c = a ? -Math.abs(u.getAttribute("data-x")) + (r.x - o.x) * t.getModifier(s, "X", e) : -Math.abs(u.getAttribute("data-x")), (Math.abs(r.x - o.x) > 15 || Math.abs(r.y - o.y) > 15) && (t.core.s.useLeftForZoom ? (u.style.left = c + "px", u.style.top = g + "px") : utils.setVendor(u, "Transform", "translate3d(" + c + "px, " + g + "px, 0)")) } }); for (var g = 0; g < t.core.___slide.length; g++)utils.on(t.core.___slide[g], "touchend.lg", function () { utils.hasClass(t.core.outer, "lg-zoomed") && i && (i = !1, utils.removeClass(t.core.outer, "lg-zoom-dragging"), t.touchendZoom(o, r, a, l, s)) }) }, i.prototype.zoomDrag = function () { for (var e, t = this, o = {}, r = {}, i = !1, a = !1, l = !1, s = !1, n = 0, c = 0; c < t.core.___slide.length; c++)utils.on(t.core.___slide[c], "mousedown.lgzoom", function (r) { var a = t.core.___slide[t.core.index].querySelector(".lg-object"); e = t.core.___slide[t.core.index].querySelector(".lg-img-rotate"), n = t.getCurrentRotation(e); var c = t.getDragAllowedAxises(a, Math.abs(n)); s = c.allowY, l = c.allowX, utils.hasClass(t.core.outer, "lg-zoomed") && utils.hasClass(r.target, "lg-object") && (l || s) && (r.preventDefault(), o = t.getDragCords(r, Math.abs(n)), i = !0, t.core.outer.scrollLeft += 1, t.core.outer.scrollLeft -= 1, utils.removeClass(t.core.outer, "lg-grab"), utils.addClass(t.core.outer, "lg-grabbing")) }); utils.on(window, "mousemove.lgzoom", function (c) { if (i) { var g, u, d = t.core.___slide[t.core.index].querySelector(".lg-img-wrap"); a = !0, r = t.getDragCords(c, Math.abs(n)), utils.addClass(t.core.outer, "lg-zoom-dragging"), u = s ? -Math.abs(d.getAttribute("data-y")) + (r.y - o.y) * t.getModifier(n, "Y", e) : -Math.abs(d.getAttribute("data-y")), g = l ? -Math.abs(d.getAttribute("data-x")) + (r.x - o.x) * t.getModifier(n, "X", e) : -Math.abs(d.getAttribute("data-x")), t.core.s.useLeftForZoom ? (d.style.left = g + "px", d.style.top = u + "px") : utils.setVendor(d, "Transform", "translate3d(" + g + "px, " + u + "px, 0)") } }), utils.on(window, "mouseup.lgzoom", function (e) { i && (i = !1, utils.removeClass(t.core.outer, "lg-zoom-dragging"), a && (o.x !== r.x || o.y !== r.y) && (r = t.getDragCords(e, Math.abs(n)), t.touchendZoom(o, r, l, s, n)), a = !1), utils.removeClass(t.core.outer, "lg-grabbing"), utils.addClass(t.core.outer, "lg-grab") }) }, i.prototype.touchendZoom = function (e, t, o, r, i) { var a = this.core.___slide[this.core.index].querySelector(".lg-img-wrap"), l = this.core.___slide[this.core.index].querySelector(".lg-object"), s = this.core.___slide[this.core.index].querySelector(".lg-img-rotate"), n = -Math.abs(a.getAttribute("data-x")) + (t.x - e.x) * this.getModifier(i, "X", s), c = -Math.abs(a.getAttribute("data-y")) + (t.y - e.y) * this.getModifier(i, "Y", s), g = this.getPossibleDragCords(l, Math.abs(i)); (Math.abs(t.x - e.x) > 15 || Math.abs(t.y - e.y) > 15) && (r && (c <= -g.maxY ? c = -g.maxY : c >= -g.minY && (c = -g.minY)), o && (n <= -g.maxX ? n = -g.maxX : n >= -g.minX && (n = -g.minX)), r ? a.setAttribute("data-y", Math.abs(c)) : c = -Math.abs(a.getAttribute("data-y")), o ? a.setAttribute("data-x", Math.abs(n)) : n = -Math.abs(a.getAttribute("data-x")), this.core.s.useLeftForZoom ? (a.style.left = n + "px", a.style.top = c + "px") : utils.setVendor(a, "Transform", "translate3d(" + n + "px, " + c + "px, 0)")) }, i.prototype.destroy = function () { var e = this; utils.off(e.core.el, ".lgzoom"), utils.off(window, ".lgzoom"); for (var t = 0; t < e.core.___slide.length; t++)utils.off(e.core.___slide[t], ".lgzoom"); utils.off(e.core.el, ".lgtmzoom"), e.resetZoom(), clearTimeout(e.zoomabletimeout), e.zoomabletimeout = !1 }, window.lgModules.zoom = i }, "function" == typeof e && e.amd ? e([], a) : void 0 !== r ? a() : (a(), i.lgZoom = {}) }, {}] }, {}, [1])(1) });