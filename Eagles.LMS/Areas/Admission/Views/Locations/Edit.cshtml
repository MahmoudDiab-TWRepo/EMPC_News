@model Location
@{
    ViewBag.Title = "Edit-Location";
    Layout = "~/Areas/Admission/Views/Shared/_Layout.cshtml";
    var requestStatus = TempData.Peek("RequestStatus") as RequestStatus;

}
@section EndHeader{

    @*<script src="https://cdn.tiny.cloud/1/darv2hkyj2fhq6bcw9dvds7nq95xpa5p19zfb5q6ybjadm5z/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: '.textarea',
            height: 500,
            plugins: [
                'advlist autolink lists link image charmap print preview anchor  advcode casechange export formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable ',
                'searchreplace visualblocks code fullscreen',
                'insertdatetime media table paste imagetools wordcount',
                'image code',
            ],
            toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent |  code',
            content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
        });

    </script>*@
}

<div class="container-fluid">

    <!-- start page title -->
    <div class="row">
        <div class="col-12">
            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                <h4 class="mb-sm-0 font-size-18">Add Location</h4>

                <div class="page-title-right">
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="/Admission/Locations">Home</a></li>
                        <li class="breadcrumb-item active">Location</li>
                    </ol>
                </div>

            </div>
        </div>
    </div>
    <!-- end page title -->
    <div class="row">
        @using (Html.BeginForm("Edit", "Locations", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.HiddenFor(s => s.Id)
            @Html.HiddenFor(s => s.MainImage)
            @Html.HiddenFor(s => s.IconImage)

            @Html.HiddenFor(s => s.CreateTime)
            @Html.HiddenFor(s => s.UserCreateId)
            @Html.HiddenFor(s => s.Status)

            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row">



                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="row">



                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Title Arabic</label>
                                            @Html.TextBoxFor(s => s.TitleArabic, null, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Title Arabic"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.TitleArabic)*@
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Title English</label>
                                            @Html.TextBoxFor(s => s.TitleEnglish, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Title English"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.TitleEnglish)*@
                                        </div>
                                    </div>


                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Short Description AR</label>
                                            @Html.TextAreaFor(s => s.ShortDescriptionArabic, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Description English"
                                           //@required = "required"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.ShortDescriptionArabic)*@
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Short Description EN</label>
                                            @Html.TextAreaFor(s => s.ShortDescriptionEnglish, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Description English"
                                           //@required = "required"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.ShortDescriptionEnglish)*@
                                        </div>
                                    </div>


                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Description Arabic</label>
                                            @Html.TextAreaFor(s => s.DescriptionArabic, new
                                       {
                                           @class = "form-control textarea",
                                           placeholder = "Description Arabic"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.DescriptionArabic)*@
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Description English</label>
                                            @Html.TextAreaFor(s => s.DescriptionEnglish, new
                                       {
                                           @class = "form-control textarea",
                                           placeholder = "Description English"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.DescriptionEnglish)*@
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Address Arabic</label>
                                            @Html.TextBoxFor(s => s.AddressArabic, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Address Arabic"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.AddressArabic)*@
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Address English</label>
                                            @Html.TextBoxFor(s => s.AddressEnglish, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Address English"
                                       })
                                            @*@Html.ValidationMessageFor(s => s.AddressEnglish)*@
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">Location Video Url [Optional]</label>
                                            @Html.TextBoxFor(s => s.LocationVideo, null, new
                                       {
                                           @class = "form-control",
                                           placeholder = "Location Video"
                                       })
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"></div>

                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label for="iconImage" class="form-label">Icon Image <span class="extiniosType">(jpg, png, peg, gif, jpg)</span><span class="extiniosType">(W:512px, H:512px)</span></label>
                                            <input class="form-control" name="iconImage" type="file" id="iconImage">
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12">
                                        <div class="mb-3">
                                            @if (Model != null && Model.IconImage != null)
                                            {
                                                <div id="box_mainImg" class="row">
                                                    <div class="col-lg-4">
                                                        <div class="ImagesGroup">
                                                            <div class="ImageItem">
                                                                <div class="Images">
                                                                    <img src="@Model.IconImage" />
                                                                </div>
                                                                <div class="DeletemainImg">
                                                                    <a class="btn_deleteIconImage" data-id="@Model.Id"><i class="bx bx-trash"></i></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>




                                                @*<img style="max-width: auto; height: 210px " src="@Model.MainImage" />*@
                                            }
                                        </div>
                                    </div>









                                    @*<div class="col-lg-12 col-md-12">
                                        <div class="mb-3">
                                            @if (Model != null && Model.IconImage != null)
                                            {
                                                <img style="max-width: auto; height: 210px " src="@Model.IconImage" />
                                            }
                                        </div>
                                    </div>*@


                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label for="mainImage" class="form-label">Main Image <span class="extiniosType">(jpg, png, peg, gif, jpg)</span><span class="extiniosType">(W:1420px, H:870px)</span></label>
                                            <input class="form-control" name="mainImage" type="file" id="mainImage">
                                        </div>
                                    </div>

                                    <div class="col-lg-12 col-md-12">
                                        <div class="mb-3">
                                            @if (Model != null && Model.MainImage != null && Model.MainImage != "")
                                            {
                                                <div id="box_mainImg" class="row">
                                                    <div class="col-lg-4">
                                                        <div class="ImagesGroup">
                                                            <div class="ImageItem">
                                                                <div class="Images">
                                                                    <img src="@Model.MainImage" />
                                                                </div>
                                                                <div class="DeletemainImg">
                                                                    <a class="btn_deleteMainImage" data-id="@Model.Id"><i class="bx bx-trash"></i></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>




                                                @*<img style="max-width: auto; height: 210px " src="@Model.MainImage" />*@
                                            }
                                        </div>
                                    </div>






                                    @*<div class="col-lg-12 col-md-12">
            <div class="mb-3">
                @if (Model != null && Model.MainImage != null)
                {
                    <img style="max-width: auto; height: 210px " src="@Model.MainImage" />
                }
            </div>
        </div>*@

                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="mb-3">
                                            <label for="uploadattachments_multi" class="form-label">
                                                Location Images [Optional] <span class="extiniosType">(jpg, png, peg, gif, jpg)</span><span class="extiniosType">(W:1420px, H:870px)</span>
                                            </label>
                                            <input multiple class="form-control" name="uploadattachments_multi" type="file" id="uploadattachments_multi">
                                        </div>
                                    </div>

                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <div class="mb-3">
                                            <label class="form-label">News Images</label>
                                            @if (Model.LocationImages != null && Model.LocationImages.Any())
                                            {

                                                <div class="ImagesGroup">
                                                    <div class="row">
                                                        @foreach (var item in Model.LocationImages)
                                                        {
                                                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 parentBox">
                                                                <div class="ImageItem">
                                                                    <div class="Images">
                                                                        <img id="@item.Id" src="@item.Path" />
                                                                    </div>
                                                                    <div class="DeleteBtn">
                                                                        <a class=" btn_delete" data-id="@item.Id"><i class="bx bx-trash"></i></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </div>
                                                </div>


                                            }

                                        </div>
                                    </div>
















                                </div>
                            </div>

                        </div>


                    </div>
                </div>
            </div> <!-- end col -->


            <div class="col-lg-12 col-md-12">
                <div class="card">
                    <div class="card-body">
                        <div class="foooterbuttons">
                            <button type="submit" class="btn btn-success waves-effect waves-light">
                                <i class="bx bx-check-double font-size-16 align-middle me-2"></i> @Resources.Global.Save
                            </button>
                            <a href="/Admission/Locations" class="btn btn-danger waves-effect waves-light">
                                <i class="fa fa-backspace back font-size-16 align-middle me-2"></i> @Resources.Global.Back
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        }
    </div>

</div>


@section EndBody{

    <script>
        $(function () {

  $("body").on("click", ".btn_delete", (s) => {
                let self = $(s.currentTarget),
                    entityId = self.attr('data-id');
                bootbox.confirm("@Resources.Global.ConfirmDeleteoperation !", function (flag) {
                    if (flag) {
                        $.ajax({
                            type: "POST",
                            url: "/api/GlobalServices/RemoveLocationsImg?id=" + entityId+"",
                            success: (response) => {
                                toastr.success('@Resources.Global.Theunithasbeensuccessfullydeleted', '', { timeOut: 10000 });
                                self.closest('.parentBox').remove();
                            }, error: (error) => {
                                // unauthorize
                                let errorMessage = manageAjaxError(error);
                                pushNotification("danger", errorMessage);
                            }
                        });
                    }
                })
            });
        });

        $("body").on("click", ".btn_deleteMainImage", (s) => {
            let self = $(s.currentTarget),

                    entityId = self.attr('data-id');
                bootbox.confirm("@Resources.Global.ConfirmDeleteoperation !", function (flag) {
                    if (flag) {
                        $.ajax({
                            type: "POST",
                            url: "/api/GlobalServices/RemoveLocationsMainImg?id=" + entityId+"",
                            success: (response) => {
                                toastr.success('@Resources.Global.Theunithasbeensuccessfullydeleted', '', { timeOut: 10000 });
                                $('#box_mainImg').remove();

                                location.reload();

                            }, error: (error) => {
                                // unauthorize
                                let errorMessage = manageAjaxError(error);
                                pushNotification("danger", errorMessage);
                            }
                        });
                    }
                })
        });


        $("body").on("click", ".btn_deleteIconImage", (s) => {
            let self = $(s.currentTarget),

                    entityId = self.attr('data-id');
                bootbox.confirm("@Resources.Global.ConfirmDeleteoperation !", function (flag) {
                    if (flag) {
                        $.ajax({
                            type: "POST",
                            url: "/api/GlobalServices/RemoveLocationsIconImg?id=" + entityId+"",
                            success: (response) => {
                                toastr.success('@Resources.Global.Theunithasbeensuccessfullydeleted', '', { timeOut: 10000 });
                                $('#box_mainImg').remove();
                                location.reload();
                            }, error: (error) => {
                                // unauthorize
                                let errorMessage = manageAjaxError(error);
                                pushNotification("danger", errorMessage);
                            }
                        });
                    }
                })
            });
    </script>



    @if (requestStatus != null)
    {

        <script>

              notify = $.notify({
                  message: '@requestStatus.Message',

              }, {

                  type: '@requestStatus.Status' == 'Edited' ? "success" :"danger",
                      animate: {
                          enter: 'animated flipInY',
                          exit: 'animated flipOutX',
                      }
                  });
        </script>

        TempData.Remove("RequestStatus");
    }
}
